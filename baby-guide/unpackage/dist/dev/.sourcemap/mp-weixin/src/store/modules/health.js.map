{"version":3,"file":"health.js","sources":["src/store/modules/health.ts"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\nimport type { TemperatureRecord, MedicineRecord, SymptomRecord } from '../types'\nimport { HealthStatus, getHealthStatus } from '../../utils/theme'\n\nexport const useHealthStore = defineStore('health', () => {\n  // 体温记录列表\n  const temperatureRecords = ref<TemperatureRecord[]>([])\n  \n  // 用药记录列表\n  const medicineRecords = ref<MedicineRecord[]>([])\n  \n  // 症状记录列表\n  const symptomRecords = ref<SymptomRecord[]>([])\n  \n  // 当前健康状态\n  const currentHealthStatus = ref<HealthStatus>(HealthStatus.Healthy)\n  \n  // 最新体温\n  const latestTemperature = computed(() => {\n    if (temperatureRecords.value.length === 0) return null\n    return temperatureRecords.value[0]\n  })\n  \n  // 今日体温记录\n  const todayTemperatureRecords = computed(() => {\n    const today = new Date().toDateString()\n    return temperatureRecords.value.filter(\n      record => new Date(record.measureTime).toDateString() === today\n    )\n  })\n  \n  // 今日用药记录\n  const todayMedicineRecords = computed(() => {\n    const today = new Date().toDateString()\n    return medicineRecords.value.filter(\n      record => new Date(record.takeTime).toDateString() === today\n    )\n  })\n  \n  /**\n   * 设置体温记录\n   */\n  function setTemperatureRecords(records: TemperatureRecord[]) {\n    temperatureRecords.value = records.sort(\n      (a, b) => new Date(b.measureTime).getTime() - new Date(a.measureTime).getTime()\n    )\n    \n    // 更新健康状态\n    if (records.length > 0) {\n      const latest = records[0]\n      currentHealthStatus.value = getHealthStatus(latest.temperature)\n    }\n  }\n  \n  /**\n   * 添加体温记录\n   */\n  function addTemperatureRecord(record: TemperatureRecord) {\n    temperatureRecords.value.unshift(record)\n    temperatureRecords.value.sort(\n      (a, b) => new Date(b.measureTime).getTime() - new Date(a.measureTime).getTime()\n    )\n    \n    // 更新健康状态\n    currentHealthStatus.value = getHealthStatus(record.temperature)\n  }\n  \n  /**\n   * 设置用药记录\n   */\n  function setMedicineRecords(records: MedicineRecord[]) {\n    medicineRecords.value = records.sort(\n      (a, b) => new Date(b.takeTime).getTime() - new Date(a.takeTime).getTime()\n    )\n  }\n  \n  /**\n   * 添加用药记录\n   */\n  function addMedicineRecord(record: MedicineRecord) {\n    medicineRecords.value.unshift(record)\n  }\n  \n  /**\n   * 设置症状记录\n   */\n  function setSymptomRecords(records: SymptomRecord[]) {\n    symptomRecords.value = records.sort(\n      (a, b) => new Date(b.recordTime).getTime() - new Date(a.recordTime).getTime()\n    )\n  }\n  \n  /**\n   * 添加症状记录\n   */\n  function addSymptomRecord(record: SymptomRecord) {\n    symptomRecords.value.unshift(record)\n  }\n  \n  /**\n   * 清空所有记录\n   */\n  function clearRecords() {\n    temperatureRecords.value = []\n    medicineRecords.value = []\n    symptomRecords.value = []\n    currentHealthStatus.value = HealthStatus.Healthy\n  }\n  \n  return {\n    temperatureRecords,\n    medicineRecords,\n    symptomRecords,\n    currentHealthStatus,\n    latestTemperature,\n    todayTemperatureRecords,\n    todayMedicineRecords,\n    setTemperatureRecords,\n    addTemperatureRecord,\n    setMedicineRecords,\n    addMedicineRecord,\n    setSymptomRecords,\n    addSymptomRecord,\n    clearRecords\n  }\n})\n"],"names":["defineStore","ref","HealthStatus","computed","getHealthStatus"],"mappings":";;;AAKa,MAAA,iBAAiBA,cAAAA,YAAY,UAAU,MAAM;AAElD,QAAA,qBAAqBC,kBAAyB,CAAA,CAAE;AAGhD,QAAA,kBAAkBA,kBAAsB,CAAA,CAAE;AAG1C,QAAA,iBAAiBA,kBAAqB,CAAA,CAAE;AAGxC,QAAA,sBAAsBA,cAAAA,IAAkBC,gBAAA,aAAa,OAAO;AAG5D,QAAA,oBAAoBC,cAAAA,SAAS,MAAM;AACnC,QAAA,mBAAmB,MAAM,WAAW;AAAU,aAAA;AAC3C,WAAA,mBAAmB,MAAM,CAAC;AAAA,EAAA,CAClC;AAGK,QAAA,0BAA0BA,cAAAA,SAAS,MAAM;AAC7C,UAAM,SAAQ,oBAAI,KAAK,GAAE,aAAa;AACtC,WAAO,mBAAmB,MAAM;AAAA,MAC9B,YAAU,IAAI,KAAK,OAAO,WAAW,EAAE,mBAAmB;AAAA,IAAA;AAAA,EAC5D,CACD;AAGK,QAAA,uBAAuBA,cAAAA,SAAS,MAAM;AAC1C,UAAM,SAAQ,oBAAI,KAAK,GAAE,aAAa;AACtC,WAAO,gBAAgB,MAAM;AAAA,MAC3B,YAAU,IAAI,KAAK,OAAO,QAAQ,EAAE,mBAAmB;AAAA,IAAA;AAAA,EACzD,CACD;AAKD,WAAS,sBAAsB,SAA8B;AAC3D,uBAAmB,QAAQ,QAAQ;AAAA,MACjC,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,WAAW,EAAE,QAAA,IAAY,IAAI,KAAK,EAAE,WAAW,EAAE,QAAQ;AAAA,IAAA;AAI5E,QAAA,QAAQ,SAAS,GAAG;AAChB,YAAA,SAAS,QAAQ,CAAC;AACJ,0BAAA,QAAQC,gBAAAA,gBAAgB,OAAO,WAAW;AAAA,IAChE;AAAA,EACF;AAKA,WAAS,qBAAqB,QAA2B;AACpC,uBAAA,MAAM,QAAQ,MAAM;AACvC,uBAAmB,MAAM;AAAA,MACvB,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,WAAW,EAAE,QAAA,IAAY,IAAI,KAAK,EAAE,WAAW,EAAE,QAAQ;AAAA,IAAA;AAI5D,wBAAA,QAAQA,gBAAAA,gBAAgB,OAAO,WAAW;AAAA,EAChE;AAKA,WAAS,mBAAmB,SAA2B;AACrD,oBAAgB,QAAQ,QAAQ;AAAA,MAC9B,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,QAAQ,EAAE,QAAA,IAAY,IAAI,KAAK,EAAE,QAAQ,EAAE,QAAQ;AAAA,IAAA;AAAA,EAE5E;AAKA,WAAS,kBAAkB,QAAwB;AACjC,oBAAA,MAAM,QAAQ,MAAM;AAAA,EACtC;AAKA,WAAS,kBAAkB,SAA0B;AACnD,mBAAe,QAAQ,QAAQ;AAAA,MAC7B,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,UAAU,EAAE,QAAA,IAAY,IAAI,KAAK,EAAE,UAAU,EAAE,QAAQ;AAAA,IAAA;AAAA,EAEhF;AAKA,WAAS,iBAAiB,QAAuB;AAChC,mBAAA,MAAM,QAAQ,MAAM;AAAA,EACrC;AAKA,WAAS,eAAe;AACtB,uBAAmB,QAAQ;AAC3B,oBAAgB,QAAQ;AACxB,mBAAe,QAAQ;AACvB,wBAAoB,QAAQF,gBAAa,aAAA;AAAA,EAC3C;AAEO,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ,CAAC;;"}