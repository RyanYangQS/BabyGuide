{"version":3,"file":"date.js","sources":["src/utils/date.ts"],"sourcesContent":["import dayjs from 'dayjs'\nimport relativeTime from 'dayjs/plugin/relativeTime'\nimport 'dayjs/locale/zh-cn'\n\ndayjs.extend(relativeTime)\ndayjs.locale('zh-cn')\n\n/**\n * 格式化日期\n * @param date 日期\n * @param format 格式\n * @returns 格式化后的日期字符串\n */\nexport function formatDate(date: Date | string | number, format: string = 'YYYY-MM-DD HH:mm'): string {\n  return dayjs(date).format(format)\n}\n\n/**\n * 获取相对时间\n * @param date 日期\n * @returns 相对时间字符串\n */\nexport function getRelativeTime(date: Date | string | number): string {\n  return dayjs(date).fromNow()\n}\n\n/**\n * 计算年龄\n * @param birthday 生日\n * @returns 年龄对象\n */\nexport function calculateAge(birthday: string): { years: number; months: number; days: number } {\n  const birth = dayjs(birthday)\n  const now = dayjs()\n  \n  let years = now.year() - birth.year()\n  let months = now.month() - birth.month()\n  let days = now.date() - birth.date()\n  \n  if (days < 0) {\n    months--\n    days += dayjs(now).subtract(1, 'month').daysInMonth()\n  }\n  \n  if (months < 0) {\n    years--\n    months += 12\n  }\n  \n  return { years, months, days }\n}\n\n/**\n * 格式化年龄显示\n * @param birthday 生日\n * @returns 年龄字符串\n */\nexport function formatAge(birthday: string): string {\n  const { years, months } = calculateAge(birthday)\n  \n  if (years === 0) {\n    return `${months}个月`\n  }\n  \n  if (months === 0) {\n    return `${years}岁`\n  }\n  \n  return `${years}岁${months}个月`\n}\n\n/**\n * 判断是否是今天\n * @param date 日期\n * @returns 是否是今天\n */\nexport function isToday(date: Date | string | number): boolean {\n  return dayjs(date).isSame(dayjs(), 'day')\n}\n\n/**\n * 获取今天的日期字符串\n * @param format 格式\n * @returns 日期字符串\n */\nexport function getToday(format: string = 'YYYY-MM-DD'): string {\n  return dayjs().format(format)\n}\n\n/**\n * 获取当前时间字符串\n * @param format 格式\n * @returns 时间字符串\n */\nexport function getCurrentTime(format: string = 'HH:mm'): string {\n  return dayjs().format(format)\n}\n"],"names":["dayjs","relativeTime"],"mappings":";;AAIAA,cAAAA,MAAM,OAAOC,cAAAA,YAAY;AACzBD,cAAAA,MAAM,OAAO,OAAO;AAQJ,SAAA,WAAW,MAA8B,SAAiB,oBAA4B;AACpG,SAAOA,cAAM,MAAA,IAAI,EAAE,OAAO,MAAM;AAClC;AAgBO,SAAS,aAAa,UAAmE;AACxF,QAAA,QAAQA,oBAAM,QAAQ;AAC5B,QAAM,MAAMA,cAAAA;AAEZ,MAAI,QAAQ,IAAI,KAAK,IAAI,MAAM,KAAK;AACpC,MAAI,SAAS,IAAI,MAAM,IAAI,MAAM,MAAM;AACvC,MAAI,OAAO,IAAI,KAAK,IAAI,MAAM,KAAK;AAEnC,MAAI,OAAO,GAAG;AACZ;AACA,YAAQA,cAAAA,MAAM,GAAG,EAAE,SAAS,GAAG,OAAO,EAAE;EAC1C;AAEA,MAAI,SAAS,GAAG;AACd;AACU,cAAA;AAAA,EACZ;AAEO,SAAA,EAAE,OAAO,QAAQ;AAC1B;AAOO,SAAS,UAAU,UAA0B;AAClD,QAAM,EAAE,OAAO,OAAO,IAAI,aAAa,QAAQ;AAE/C,MAAI,UAAU,GAAG;AACf,WAAO,GAAG,MAAM;AAAA,EAClB;AAEA,MAAI,WAAW,GAAG;AAChB,WAAO,GAAG,KAAK;AAAA,EACjB;AAEO,SAAA,GAAG,KAAK,IAAI,MAAM;AAC3B;;;"}